{"ast":null,"code":"var _jsxFileName = \"/home/perigrine/react_tuts/movies/go-movies/src/Components/InputProduction.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect, useState } from 'react';\nimport Alert from \"./ui-components/Alert\";\nimport Select from \"./form-components/Select\";\nimport Input from \"./form-components/Input\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction InputProduction(props) {\n  _s();\n\n  const [input, setInput] = useState({\n    chick: \"\",\n    id: 0,\n    title: \"\",\n    eggs: \"\",\n    dirty: \"\",\n    wrong_shape: \"\",\n    weak_shell: \"\",\n    damaged: \"\",\n    hatching_eggs: \"\",\n    Premises: {}\n  });\n  const [error] = useState(null);\n  const [errors, setErrors] = useState(null);\n  const [alert, setAlert] = useState({\n    type: \"d-none\",\n    message: \"\"\n  });\n  const chickOptions = [{\n    id: \"Kuroiler\",\n    value: \"Kuroiler\"\n  }, {\n    id: \"RainbowRooster\",\n    value: \"RainbowRooster\"\n  }, {\n    id: \"Broiler\",\n    value: \"Broiler\"\n  }, {\n    id: \"Layer\",\n    value: \"Layer\"\n  }];\n  const farmOptions = [{\n    id: \"Kaptagat\",\n    value: \"Kaptagat\"\n  }, {\n    id: \"Nyaru\",\n    value: \"Nyaru\"\n  }, {\n    id: \"Nandi\",\n    value: \"Nandi\"\n  }];\n  useEffect(() => {}, []);\n\n  const handleChange = e => {\n    let value = e.target.value;\n    let name = e.target.name;\n    setInput({ ...input,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const formData = new FormData(e.currentTarget);\n    const backendData = {};\n\n    for (var field of formData.entries()) {\n      const [name, value] = field; // read about destructuring in javascript -> for Objects, Arrays\n\n      if (name === \"title\" || name === \"farm\") {\n        // == and === difference in javascript\n        backendData[name] = value;\n      } else {\n        const parsedValue = parseInt(value);\n        console.log(name, parsedValue);\n        backendData[name] = parsedValue; // if the value can't be converted to an Integer, set the field to null\n        // [-] chaining operator in javascript, logical OR, AND, ||, &&\n      }\n    } // console.log(backendData)\n\n\n    return;\n    let errors = [];\n\n    if (input.title === \"\") {\n      errors.push(\"title\"); //validating title only\n    }\n\n    setErrors(errors);\n\n    if (errors.length > 0) {\n      return false;\n    }\n\n    const data = new FormData(e.target);\n    const payload = Object.fromEntries(data.entries());\n    const myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\"); //jwt here\n\n    const requestOptions = {\n      method: \"POST\",\n      body: JSON.stringify(payload),\n      headers: myHeaders\n    }; // axios ?\n    // token = ''\n    // config = {\n    //     'Content-Type': 'application/json',\n    //     'Headers': {\n    //         'Authorization': `Token ${token}`\n    //     }\n    // }\n    // axios.post('url-here', body, config)\n    // fetch method is Okay\n\n    fetch(`https://flockmanager.herokuapp.com/v1/kukuchic/${chickOptions}`, requestOptions).then(response => response.json()).then(data => {\n      if (data.error) {\n        setAlert({\n          alert: {\n            type: \"alert-danger\",\n            message: data.error.message\n          }\n        });\n      } else {\n        props.history.push({\n          pathname: \"/all_chicks\"\n        });\n      }\n    });\n  };\n\n  function hasError() {\n    return errors;\n  }\n\n  if (error !== null) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", error.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 16\n    }, this);\n  } else {\n    // not necessary\n    return /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Add/Edit Production\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Alert, {\n        alertType: alert.type,\n        alertMessage: alert.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"hidden\",\n          name: \"id\",\n          id: \"id\",\n          defaultValue: input.id,\n          readOnly: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          title: \"Flock\",\n          name: \"chick\",\n          options: chickOptions,\n          value: input.chick,\n          onChange: handleChange,\n          placeholder: \"Choose...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          title: \"Title\",\n          className: hasError(\"title\") ? \"is-invalid\" : \"\",\n          type: \"text\",\n          name: \"title\",\n          value: input.title,\n          onChange: handleChange,\n          errorDiv: hasError(\"title\") ? \"text-danger\" : \"d-none\",\n          errorMsg: \"Please enter a title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          title: \"Number of Eggs\",\n          type: \"number\",\n          name: \"eggs\",\n          value: input.eggs,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          title: \"Dirty Eggs\",\n          type: \"number\",\n          name: \"dirty\",\n          value: input.dirty,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          title: \"Wrong Shape\",\n          type: \"number\" // the rest you can change, lemme demonstrate\n          ,\n          name: \"wrong_shape\",\n          value: input.wrong_shape,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          title: \"Weak Shell\",\n          type: \"number\",\n          name: \"weak_shell\",\n          value: input.weak_shell,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          title: \"Damaged Eggs\",\n          type: \"number\",\n          name: \"damaged\",\n          value: input.damaged,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          title: \"Total Hatching Eggs\",\n          type: \"number\",\n          name: \"hatching_eggs\",\n          value: input.hatching_eggs,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          title: \"Farm\",\n          name: \"Premises\",\n          options: farmOptions,\n          value: input.Premises.farm,\n          onChange: handleChange,\n          placeholder: \"Select farm...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          title: \"House Number\",\n          type: \"text\",\n          name: \"house\",\n          value: input.Premises.house,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/all_chicks\",\n          className: \"btn btn-warning ms-1\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this);\n  }\n}\n\n_s(InputProduction, \"gTuo90y3uYRB3438k/UnvUG+3pA=\");\n\n_c = InputProduction;\nexport default InputProduction;\n\nvar _c;\n\n$RefreshReg$(_c, \"InputProduction\");","map":{"version":3,"sources":["/home/perigrine/react_tuts/movies/go-movies/src/Components/InputProduction.jsx"],"names":["React","Fragment","useEffect","useState","Alert","Select","Input","Link","InputProduction","props","input","setInput","chick","id","title","eggs","dirty","wrong_shape","weak_shell","damaged","hatching_eggs","Premises","error","errors","setErrors","alert","setAlert","type","message","chickOptions","value","farmOptions","handleChange","e","target","name","handleSubmit","preventDefault","formData","FormData","currentTarget","backendData","field","entries","parsedValue","parseInt","console","log","push","length","data","payload","Object","fromEntries","myHeaders","Headers","append","requestOptions","method","body","JSON","stringify","headers","fetch","then","response","json","history","pathname","hasError","farm","house"],"mappings":"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","sourcesContent":["import React, {Fragment, useEffect, useState} from 'react';\r\nimport Alert from \"./ui-components/Alert\";\r\nimport Select from \"./form-components/Select\";\r\nimport Input from \"./form-components/Input\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nfunction InputProduction(props) {\r\n    const [input, setInput] = useState({\r\n        chick: \"\",\r\n        id: 0,\r\n        title: \"\",\r\n        eggs: \"\",\r\n        dirty: \"\",\r\n        wrong_shape: \"\",\r\n        weak_shell: \"\",\r\n        damaged: \"\",\r\n        hatching_eggs: \"\",\r\n        Premises: {},\r\n    });\r\n    const [error] = useState(null);\r\n    const [errors, setErrors] = useState(null);\r\n    const [alert, setAlert] = useState({type: \"d-none\", message: \"\"})\r\n    const chickOptions = [\r\n        { id: \"Kuroiler\", value: \"Kuroiler\" },\r\n        { id: \"RainbowRooster\", value: \"RainbowRooster\" },\r\n        { id: \"Broiler\", value: \"Broiler\" },\r\n        { id: \"Layer\", value: \"Layer\" },\r\n    ]\r\n    const farmOptions = [\r\n        {id: \"Kaptagat\", value: \"Kaptagat\"},\r\n        {id: \"Nyaru\", value: \"Nyaru\"},\r\n        {id: \"Nandi\", value: \"Nandi\"},\r\n    ];\r\n\r\n    useEffect(() =>{\r\n\r\n    }, [])\r\n\r\n    const handleChange = (e) => {\r\n        let value = e.target.value;\r\n        let name = e.target.name;\r\n        setInput({\r\n            ...input,\r\n            [name]: value,\r\n        });\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const formData = new FormData(e.currentTarget);\r\n        const backendData = {};\r\n        for (var field of formData.entries()) {\r\n            const [name, value] = field; // read about destructuring in javascript -> for Objects, Arrays\r\n            if (name === \"title\" || name === \"farm\") { // == and === difference in javascript\r\n                backendData[name] = value;\r\n            } else {\r\n                const parsedValue = parseInt(value);\r\n                console.log(name, parsedValue)\r\n                backendData[name] = parsedValue; // if the value can't be converted to an Integer, set the field to null\r\n                // [-] chaining operator in javascript, logical OR, AND, ||, &&\r\n            }\r\n        }\r\n        // console.log(backendData)\r\n        return ;\r\n        let errors = [];\r\n        if (input.title === \"\") {\r\n            errors.push(\"title\") //validating title only\r\n        }\r\n        setErrors(errors)\r\n        if (errors.length > 0) {\r\n            return false\r\n        }\r\n\r\n        const data = new FormData(e.target)\r\n        const payload = Object.fromEntries(data.entries());\r\n        const myHeaders = new Headers();\r\n        myHeaders.append(\"Content-Type\", \"application/json\");\r\n        //jwt here\r\n\r\n        const requestOptions = {\r\n            method: \"POST\",\r\n            body: JSON.stringify(payload),\r\n            headers: myHeaders,\r\n        }\r\n        // axios ?\r\n        // token = ''\r\n        // config = {\r\n        //     'Content-Type': 'application/json',\r\n        //     'Headers': {\r\n        //         'Authorization': `Token ${token}`\r\n        //     }\r\n        // }\r\n        // axios.post('url-here', body, config)\r\n        // fetch method is Okay\r\n        fetch(`https://flockmanager.herokuapp.com/v1/kukuchic/${chickOptions}`, requestOptions)\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n                if (data.error) {\r\n                    setAlert({\r\n                        alert: {type: \"alert-danger\", message: data.error.message},\r\n                    })\r\n                } else {\r\n                    props.history.push({\r\n                        pathname: \"/all_chicks\"\r\n                    });\r\n                }\r\n            });\r\n\r\n\r\n    };\r\n    function hasError() {\r\n        return errors;\r\n    }\r\n\r\n    if (error !== null) {\r\n        return <div>Error: {error.message}</div>\r\n    } else { // not necessary\r\n        return (\r\n            <Fragment>\r\n                <h2>Add/Edit Production</h2>\r\n                <Alert\r\n                    alertType={alert.type}\r\n                    alertMessage={alert.message}\r\n                />\r\n                <hr/>\r\n                <form onSubmit={handleSubmit}>\r\n                    <input\r\n                        type=\"hidden\"\r\n                        name=\"id\"\r\n                        id=\"id\"\r\n                        defaultValue={input.id}\r\n                        readOnly\r\n                    />\r\n\r\n                    <Select\r\n                        title={\"Flock\"}\r\n                        name=\"chick\"\r\n                        options={chickOptions}\r\n                        value={input.chick}\r\n                        onChange={handleChange}\r\n                        placeholder=\"Choose...\"\r\n                    />\r\n\r\n                    <Input\r\n                        title={\"Title\"}\r\n                        className={hasError(\"title\") ? \"is-invalid\" : \"\"}\r\n                        type=\"text\"\r\n                        name=\"title\"\r\n                        value={input.title}\r\n                        onChange={handleChange}\r\n                        errorDiv={hasError(\"title\") ? \"text-danger\" : \"d-none\"}\r\n                        errorMsg={\"Please enter a title\"}\r\n                    />\r\n\r\n                    <Input\r\n                        title=\"Number of Eggs\"\r\n                        type=\"number\"\r\n                        name=\"eggs\"\r\n                        value={input.eggs}\r\n                        onChange={handleChange}\r\n                    />\r\n\r\n                    <Input\r\n                        title=\"Dirty Eggs\"\r\n                        type=\"number\"\r\n                        name=\"dirty\"\r\n                        value={input.dirty}\r\n                        onChange={handleChange}\r\n                    />\r\n\r\n                    <Input\r\n                        title=\"Wrong Shape\"\r\n                        type=\"number\" // the rest you can change, lemme demonstrate\r\n                        name=\"wrong_shape\"\r\n                        value={input.wrong_shape}\r\n                        onChange={handleChange}\r\n                    />\r\n                    <Input\r\n                        title={\"Weak Shell\"}\r\n                        type=\"number\"\r\n                        name={\"weak_shell\"}\r\n                        value={input.weak_shell}\r\n                        onChange={handleChange}\r\n                    />\r\n\r\n                    <Input\r\n                        title={\"Damaged Eggs\"}\r\n                        type=\"number\"\r\n                        name={\"damaged\"}\r\n                        value={input.damaged}\r\n                        onChange={handleChange}\r\n                    />\r\n\r\n                    <Input\r\n                        title={\"Total Hatching Eggs\"}\r\n                        type=\"number\"\r\n                        name={\"hatching_eggs\"}\r\n                        value={input.hatching_eggs}\r\n                        onChange={handleChange}\r\n                    />\r\n\r\n                    <Select\r\n                        title={\"Farm\"}\r\n                        name={\"Premises\"}\r\n                        options={farmOptions}\r\n                        value={input.Premises.farm}\r\n                        onChange={handleChange}\r\n                        placeholder=\"Select farm...\"\r\n                    />\r\n                    <Input\r\n                        title={\"House Number\"}\r\n                        type={\"text\"}\r\n                        name={\"house\"}\r\n                        value={input.Premises.house}\r\n                        onChange={handleChange}\r\n                    />\r\n                    <button className=\"btn btn-primary\">Save</button>\r\n                    <Link to=\"/all_chicks\" className=\"btn btn-warning ms-1\">\r\n                        Cancel\r\n                    </Link>\r\n                </form>\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default InputProduction"]},"metadata":{},"sourceType":"module"}